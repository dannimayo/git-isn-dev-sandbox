<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <description>Adds the Cdev Account Manager badge from the LCO Metric page.</description>
    <formulas>
        <name>BadgeLevel</name>
        <dataType>String</dataType>
        <expression>IF({!sObject_LCOMetric.EligibleBadgeTextName__c}=&quot;Teacher\&#39;s Pet&quot;,&quot;Level 1&quot;,IF({!sObject_LCOMetric.EligibleBadgeTextName__c}=&quot;Honor Roll&quot;,&quot;Level 2&quot;,IF({!sObject_LCOMetric.EligibleBadgeTextName__c}=&quot;Valedictorian&quot;,&quot;Level 3&quot;,&quot;&quot;)))</expression>
    </formulas>
    <interviewLabel>Create Badge from LCO Metric {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create Badge from LCO Metric</label>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateBadge</name>
        <label>CreateBadge</label>
        <locationX>101</locationX>
        <locationY>379</locationY>
        <assignRecordIdToReference>badgeId</assignRecordIdToReference>
        <faultConnector>
            <targetReference>Error_Screen</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Awarded_To__c</field>
            <value>
                <elementReference>sObject_LCOMetric.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Badge_Level__c</field>
            <value>
                <elementReference>BadgeLevel</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Badge_Track__c</field>
            <value>
                <stringValue>a1R34000006A4MY</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CDev_Metric__c</field>
            <value>
                <elementReference>sObject_LCOMetric.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Date_Awarded__c</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Notes__c</field>
            <value>
                <elementReference>Notes_ScreenField</elementReference>
            </value>
        </inputAssignments>
        <object>Badge__c</object>
    </recordCreates>
    <recordLookups>
        <name>FastLookup_LCOMetric</name>
        <label>FastLookup_LCOMetric</label>
        <locationX>109</locationX>
        <locationY>79</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LCO_Badge_Start</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>lcoMetricId</elementReference>
            </value>
        </filters>
        <object>LCO_Metric__c</object>
        <outputReference>sObject_LCOMetric</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>EligibleBadgeTextName__c</queriedFields>
    </recordLookups>
    <screens>
        <name>Error_Screen</name>
        <label>Error Screen</label>
        <locationX>360</locationX>
        <locationY>380</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>Error</name>
            <fieldText>Oops! Follow up with Salesforce Admin for assistance.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>LCO_Badge_Start</name>
        <label>LCO Badge Start</label>
        <locationX>107</locationX>
        <locationY>218</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>CreateBadge</targetReference>
        </connector>
        <fields>
            <name>DisplayText</name>
            <fieldText>Create {!sObject_LCOMetric.EligibleBadgeTextName__c} badge? Enter notes and click finish to add badge.</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Notes_ScreenField</name>
            <fieldText>Notes</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>FastLookup_LCOMetric</startElementReference>
    <status>Active</status>
    <variables>
        <name>badgeId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>lcoMetricId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Notes</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>sObject_LCOMetric</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>LCO_Metric__c</objectType>
    </variables>
</Flow>
